<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.huyong.dao.mapper.EventMapper">
    <select id="getEventBosByTypeWithPageOrderByTime" resultType="eventBO">
    SELECT
        a.*, b.picture,b.user_name,c.title,d.content as replyContent
    FROM
        `event` a
        INNER JOIN `user` b ON a.from_user_id = b.id
        left JOIN article c ON a.article_id = c.id
        left JOIN topic d ON a.topic_id = d.id
        where a.`type` = #{type} and a.`to_user_id` = #{id}
        order by a.`update_time` desc
        limit #{offset},#{pageSize}
    </select>
    <select id="getEventBosByTypeCount" resultType="Integer">
    SELECT
        count(1)
    FROM
        `event` a
        INNER JOIN `user` b ON a.from_user_id = b.id
        left JOIN article c ON a.article_id = c.id
        left JOIN topic d ON a.topic_id = d.id
        where a.`type` = #{type} and a.`to_user_id` = #{id}
    </select>
</mapper>
